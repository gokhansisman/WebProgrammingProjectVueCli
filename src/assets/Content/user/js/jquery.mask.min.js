"use strict";!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports?module.exports=t(require("jquery")):t(jQuery||Zepto)}(function($){var t=function(t,a,e){var n={invalid:[],getCaret:function(){try{var a,e=0,r=t.get(0),s=document.selection,o=r.selectionStart;return s&&-1===navigator.appVersion.indexOf("MSIE 10")?(a=s.createRange(),a.moveStart("character",-n.val().length),e=a.text.length):(o||"0"===o)&&(e=o),e}catch(c){}},setCaret:function(a){try{if(t.is(":focus")){var e,n=t.get(0);n.setSelectionRange?(n.focus(),n.setSelectionRange(a,a)):(e=n.createTextRange(),e.collapse(!0),e.moveEnd("character",a),e.moveStart("character",a),e.select())}}catch(r){}},events:function(){t.on("keydown.mask",function(a){t.data("mask-keycode",a.keyCode||a.which)}).on($.jMaskGlobals.useInput?"input.mask":"keyup.mask",n.behaviour).on("paste.mask drop.mask",function(){setTimeout(function(){t.keydown().keyup()},100)}).on("change.mask",function(){t.data("changed",!0)}).on("blur.mask",function(){s===n.val()||t.data("changed")||t.trigger("change"),t.data("changed",!1)}).on("blur.mask",function(){s=n.val()}).on("focus.mask",function(t){e.selectOnFocus===!0&&$(t.target).select()}).on("focusout.mask",function(){e.clearIfNotMatch&&!o.test(n.val())&&n.val("")})},getRegexMask:function(){for(var t=[],e,n,s,o,c,i,l=0;l<a.length;l++)e=r.translation[a.charAt(l)],e?(n=e.pattern.toString().replace(/.{1}$|^.{1}/g,""),s=e.optional,o=e.recursive,o?(t.push(a.charAt(l)),c={digit:a.charAt(l),pattern:n}):t.push(s||o?n+"?":n)):t.push(a.charAt(l).replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"));return i=t.join(""),c&&(i=i.replace(new RegExp("("+c.digit+"(.*"+c.digit+")?)"),"($1)?").replace(new RegExp(c.digit,"g"),c.pattern)),new RegExp(i)},destroyEvents:function(){t.off(["input","keydown","keyup","paste","drop","blur","focusout",""].join(".mask "))},val:function(a){var e=t.is("input"),n=e?"val":"text",r;return arguments.length>0?(t[n]()!==a&&t[n](a),r=t):r=t[n](),r},getMCharsBeforeCount:function(t,e){for(var n=0,s=0,o=a.length;o>s&&t>s;s++)r.translation[a.charAt(s)]||(t=e?t+1:t,n++);return n},caretPos:function(t,e,s,o){var c=r.translation[a.charAt(Math.min(t-1,a.length-1))];return c?Math.min(t+s-e-o,s):n.caretPos(t+1,e,s,o)},behaviour:function(a){a=a||window.event,n.invalid=[];var e=t.data("mask-keycode");if(-1===$.inArray(e,r.byPassKeys)){var s=n.getCaret(),o=n.val(),c=o.length,i=n.getMasked(),l=i.length,u=n.getMCharsBeforeCount(l-1)-n.getMCharsBeforeCount(c-1),f=c>s;return n.val(i),f&&(8!==e&&46!==e&&(s=n.caretPos(s,c,l,u)),n.setCaret(s)),n.callbacks(a)}},getMasked:function(t,s){var o=[],c=void 0===s?n.val():s+"",i=0,l=a.length,u=0,f=c.length,h=1,v="push",d=-1,k,p;for(e.reverse?(v="unshift",h=-1,k=0,i=l-1,u=f-1,p=function(){return i>-1&&u>-1}):(k=l-1,p=function(){return l>i&&f>u});p();){var g=a.charAt(i),m=c.charAt(u),M=r.translation[g];M?(m.match(M.pattern)?(o[v](m),M.recursive&&(-1===d?d=i:i===k&&(i=d-h),k===d&&(i-=h)),i+=h):M.optional?(i+=h,u-=h):M.fallback?(o[v](M.fallback),i+=h,u-=h):n.invalid.push({p:u,v:m,e:M.pattern}),u+=h):(t||o[v](g),m===g&&(u+=h),i+=h)}var y=a.charAt(k);return l!==f+1||r.translation[y]||o.push(y),o.join("")},callbacks:function(r){var o=n.val(),c=o!==s,i=[o,r,t,e],l=function(t,a,n){"function"==typeof e[t]&&a&&e[t].apply(this,n)};l("onChange",c===!0,i),l("onKeyPress",c===!0,i),l("onComplete",o.length===a.length,i),l("onInvalid",n.invalid.length>0,[o,r,t,n.invalid,e])}};t=$(t);var r=this,s=n.val(),o;a="function"==typeof a?a(n.val(),void 0,t,e):a,r.mask=a,r.options=e,r.remove=function(){var a=n.getCaret();return n.destroyEvents(),n.val(r.getCleanVal()),n.setCaret(a-n.getMCharsBeforeCount(a)),t},r.getCleanVal=function(){return n.getMasked(!0)},r.getMaskedVal=function(t){return n.getMasked(!1,t)},r.init=function(a){if(a=a||!1,e=e||{},r.clearIfNotMatch=$.jMaskGlobals.clearIfNotMatch,r.byPassKeys=$.jMaskGlobals.byPassKeys,r.translation=$.extend({},$.jMaskGlobals.translation,e.translation),r=$.extend(!0,{},r,e),o=n.getRegexMask(),a===!1){e.placeholder&&t.attr("placeholder",e.placeholder),t.data("mask")&&t.attr("autocomplete","off"),n.destroyEvents(),n.events();var s=n.getCaret();n.val(n.getMasked()),n.setCaret(s+n.getMCharsBeforeCount(s,!0))}else n.events(),n.val(n.getMasked())},r.init(!t.is("input"))};$.maskWatchers={};var a=function(){var a=$(this),n={},r="data-mask-",s=a.attr("data-mask");return a.attr(r+"reverse")&&(n.reverse=!0),a.attr(r+"clearifnotmatch")&&(n.clearIfNotMatch=!0),"true"===a.attr(r+"selectonfocus")&&(n.selectOnFocus=!0),e(a,s,n)?a.data("mask",new t(this,s,n)):void 0},e=function(t,a,e){e=e||{};var n=$(t).data("mask"),r=JSON.stringify,s=$(t).val()||$(t).text();try{return"function"==typeof a&&(a=a(s)),"object"!=typeof n||r(n.options)!==r(e)||n.mask!==a}catch(o){}},n=function(t){var a=document.createElement("div"),e;return t="on"+t,e=t in a,e||(a.setAttribute(t,"return;"),e="function"==typeof a[t]),a=null,e};$.fn.mask=function(a,n){n=n||{};var r=this.selector,s=$.jMaskGlobals,o=s.watchInterval,c=n.watchInputs||s.watchInputs,i=function(){return e(this,a,n)?$(this).data("mask",new t(this,a,n)):void 0};return $(this).each(i),r&&""!==r&&c&&(clearInterval($.maskWatchers[r]),$.maskWatchers[r]=setInterval(function(){$(document).find(r).each(i)},o)),this},$.fn.masked=function(t){return this.data("mask").getMaskedVal(t)},$.fn.unmask=function(){return clearInterval($.maskWatchers[this.selector]),delete $.maskWatchers[this.selector],this.each(function(){var t=$(this).data("mask");t&&t.remove().removeData("mask")})},$.fn.cleanVal=function(){return this.data("mask").getCleanVal()},$.applyDataMask=function(t){t=t||$.jMaskGlobals.maskElements;var e=t instanceof $?t:$(t);e.filter($.jMaskGlobals.dataMaskAttr).each(a)};var r={maskElements:"input,td,span,div",dataMaskAttr:"*[data-mask]",dataMask:!0,watchInterval:300,watchInputs:!0,useInput:n("input"),watchDataMask:!1,byPassKeys:[9,16,17,18,36,37,38,39,40,91],translation:{0:{pattern:/\d/},9:{pattern:/\d/,optional:!0},"#":{pattern:/\d/,recursive:!0},A:{pattern:/[a-zA-Z0-9]/},S:{pattern:/[a-zA-Z]/}}};$.jMaskGlobals=$.jMaskGlobals||{},r=$.jMaskGlobals=$.extend(!0,{},r,$.jMaskGlobals),r.dataMask&&$.applyDataMask(),setInterval(function(){$.jMaskGlobals.watchDataMask&&$.applyDataMask()},r.watchInterval)});